!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.tappy=e()}}(function(){return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t){function n(e,t){return e+t}function r(e,t,n){var r,o,i,u,a,f;if("number"==typeof e._tap||"number"==typeof t._tap)throw new Error("Can't compare Rhythms before calling done()");return o=e.length,o!==t.length?!1:(o--,e=e._taps,t=t._taps,n?(a=e,f=t):(i=e.reduce(function(e,t){return e+t}),u=t.reduce(function(e,t){return e+t}),i>u?(a=e,f=t):(a=t,f=e),r=a.map(function(e,t){var n=f[t];return n/e}).reduce(function(e,t){return e+t})/o,a=a.map(function(e){return e*r})),1-a.reduce(function(e,t,n){var r=f[n],o=Math.max(t,r),i=Math.min(t,r);return e+(o-i)/o},0)/o)}function o(){var e,t,r,o,u,a=Array.prototype.slice.call(arguments);if(a.some(function(e){return"number"==typeof e._tap}))throw new Error("Can't combine Rhythms before calling done()");if(u=a.reduce(function(e,t){return e+t._weight},0),e=a.shift(),r=e.length,a.some(function(e){return e.length!==r}))throw new Error("Can't combine Rhythms of different lengths");return t=e._weight,o=e._taps.map(function(e,n){return(e*t+a.reduce(function(e,t){return e+t._taps[n]*t._weight},0))/u}),Object.freeze(new i({length:r,duration:o.reduce(n),_taps:o,_weight:u}))}function i(e){if(null==e)this.length=0,this.duration=0,this._prevTap=0,this._curTap=0,this._taps=[],this._weight=1;else if(e.constructor===Array){if(!e.length)throw new Error("Rhythm array cannot be empty");if(e.some(function(e){return"number"!=typeof e||!e}))throw new Error("Rhythm array must only contain non-zero numbers");this.length=e.length+1,this.duration=e.reduce(n),this._taps=e,this._weight=1,Object.freeze(this)}else{if(!(e.hasOwnProperty("length")&&e.hasOwnProperty("_taps")&&e.hasOwnProperty("_weight")&&e.hasOwnProperty("duration")))throw new Error("Object passed to Rhythm is poorly formatted");this.length=e.length,this.duration=e.duration,this._taps=e._taps,this._weight=e._weight,Object.freeze(this)}}var u=e("right-now");i.prototype.tap=function(){var e,t,n=this._curTap;if("undefined"==typeof n)throw new Error("Can't call tap() after calling done()");return t=this._prevTap=n,n=this._curTap=u(),t&&(e=n-t||1,this._taps.push(e),this.duration+=e),this.length++,this},i.prototype.done=function(){if(this.length<2)throw new Error("Can't call done() with less than 2 taps");return delete this._curTap,delete this._prevTap,delete this._nextTap,Object.freeze(this),this},i.prototype.playback=function(e,t,n){function r(){var n,i=a.pop();e(o++),i?(n=u()-f-h,setTimeout(r,i-n),h+=i):"function"==typeof t&&t()}var o,i,a,f,h;if("number"==typeof this._curTap)throw new Error("Can't call playback() before calling done()");return o=h=0,i=this.length,a=this._taps.slice().reverse(),n&&(a=a.map(function(e){return e*n})),f=u(),r(),this},t.exports={compare:r,average:o,Rhythm:i}},{"right-now":2}],2:[function(e,t){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});